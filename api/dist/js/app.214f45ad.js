(function(e){function t(t){for(var n,c,i=t[0],s=t[1],u=t[2],p=0,d=[];p<i.length;p++)c=i[p],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var s=r[i];0!==a[s]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},o=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=s;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1951:function(e,t,r){"use strict";var n=r("7017"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[r("v-autocomplete",{staticClass:"mt-5",attrs:{items:e.projects,"item-text":"name","item-value":"id",label:"Projects",clearable:"","no-data-text":"No projects found","return-object":!1,"auto-select-first":""},model:{value:e.project,callback:function(t){e.project=t},expression:"project"}}),r("new-project",{on:{created:function(t){return e.getProjects()}}}),r("dark-toggle")],1),e.project?r("v-main",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12","offset-sm":"6",sm:"6","offset-md":"8",md:"4"}},[r("v-card",{staticClass:"px-2"},[r("v-row",[r("v-col",{attrs:{cols:"6"}},[e._v("Balance: ")]),r("v-col",{staticClass:"text-right",class:{"warning--text":e.totals.balance>0,"primary--text":e.totals.balance<0},attrs:{cols:"6"}},[e._v(e._s(e._f("currency")(e.totals.balance)))])],1),r("v-row",[r("v-col",{attrs:{cols:"6"}},[e._v("Owed:")]),r("v-col",{staticClass:"text-right",class:{"warning--text":e.totals.owed>0,"primary--text":e.totals.owed<0},attrs:{cols:"6"}},[e._v(e._s(e._f("currency")(e.totals.owed)))])],1),r("v-row",[r("v-col",{attrs:{cols:"6"}},[e._v("Paid:")]),r("v-col",{staticClass:"text-right",class:{"error--text":e.totals.paid>0,"success--text":e.totals.paid<0},attrs:{cols:"6"}},[e._v(e._s(e._f("currency")(e.totals.paid)))])],1)],1)],1)],1),r("v-text-field",{attrs:{label:"Search groups",clearable:""},model:{value:e.groupSearch,callback:function(t){e.groupSearch=t},expression:"groupSearch"}}),r("v-row",{staticClass:"indigo darken-1 white--text"},[r("v-col",{staticClass:"text-left",attrs:{cols:"12",md:"6"}},[e._v(" Payment Group "),r("new-paygroup",{attrs:{project:e.project},on:{created:e.getGroups}})],1),r("v-col",{staticClass:"text-right",attrs:{cols:"4",md:"2"}},[e._v(" Balance ")]),r("v-col",{staticClass:"text-right",attrs:{cols:"4",md:"2"}},[e._v(" Owed ")]),r("v-col",{staticClass:"text-right",attrs:{cols:"4",md:"2"}},[e._v(" Paid ")])],1),e._l(e.sortedGroups,(function(t){return r("pay-group",{key:"pay-group-"+t.id,staticClass:"pay-group accent",class:[{"is-active":t.id===e.activeGroup}],staticStyle:{cursor:"pointer"},attrs:{group:t,active:t.id===e.activeGroup},on:{updated:e.getGroups},nativeOn:{click:function(r){return e.setActiveGroup(t.id)}}})}))],2)],1):r("v-main",[r("v-container",[r("v-row",[r("v-col",[r("v-alert",{staticClass:"primary",attrs:{dark:""}},[e._v("Select a project")])],1)],1)],1)],1),r("v-spacer")],1)},o=[],c=(r("4de4"),r("4160"),r("c975"),r("fb6a"),r("b0c0"),r("159b"),r("96cf"),r("1da1")),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{staticClass:"text-center"},[r("v-col",{staticClass:"text-left pb-0",attrs:{cols:"12",sm:"6"}},[e.editingName?r("span",[r("v-text-field",{attrs:{label:"Group title","append-outer-icon":"fa-check"},on:{click:function(e){e.stopPropagation()},"click:append-outer":function(t){return t.stopPropagation(),e.updateGroupName(t)}},model:{value:e.groupName,callback:function(t){e.groupName=t},expression:"groupName"}})],1):r("span",{on:{click:function(t){t.stopPropagation(),e.editingName=!0}}},[e._v(" "+e._s(e.group.name)+" ")])]),r("v-col",{staticClass:"text-right",class:{"warning--text":e.totals.balance>0,"primary--text":e.totals.balance<0},attrs:{cols:"4",sm:"2"}},[e._v(" "+e._s(e._f("currency")(e.totals.balance))+" ")]),r("v-col",{staticClass:"text-right",class:{"warning--text":e.group.owed>0,"primary--text":e.group.owed<0},attrs:{cols:"4",sm:"2"}},[e._v(" "+e._s(e._f("currency")(e.group.owed))+" ")]),r("v-col",{staticClass:"text-right",class:{"error--text":e.group.total>0,"success--text":e.group.total<0},attrs:{cols:"4",sm:"2"}},[e._v(" "+e._s(e._f("currency")(e.group.total))+" ")]),e.active?r("v-col",{staticStyle:{cursor:"default"},attrs:{cols:"12"},on:{click:function(e){e.stopPropagation()}}},[r("v-card",{attrs:{rounded:"0",elevation:"8"}},[r("v-container",{staticClass:"py-0 mt-0"},[r("v-row",{staticClass:"py-0"},[r("v-col",{staticClass:"py-0",attrs:{cols:"10"}},[r("v-text-field",{attrs:{label:"Search payments",clearable:""},model:{value:e.paymentSearch,callback:function(t){e.paymentSearch=t},expression:"paymentSearch"}})],1),r("v-col",{staticClass:"text-right",attrs:{cols:"2"}},[r("v-btn",{attrs:{icon:"",title:"Delete group",color:"error"},on:{click:e.deleteGroup}},[r("v-icon",[e._v(" fa fa-trash-alt ")])],1)],1)],1),r("v-row",{staticClass:"blue-grey white--text"},[r("v-col",{staticClass:"text-left",attrs:{cols:"12",md:"6"}},[e._v(" Entry "),e.payments.find((function(e){return!e.id}))?e._e():r("v-btn",{staticClass:"ml-5 mr-2",attrs:{small:"",color:"success"},on:{click:e.newPayment}},[r("v-icon",[e._v("fa fa-plus")])],1)],1),r("v-col",{staticClass:"text-right",attrs:{cols:"4",md:"2"}},[e._v(" Date ")]),r("v-col",{staticClass:"text-right",attrs:{cols:"4",md:"2"}},[e._v(" Owed "),r("div",[e._v(e._s(e._f("currency")(e.totals.owed)))])]),r("v-col",{staticClass:"text-right",attrs:{cols:"4",md:"2"}},[e._v(" Total "),r("div",[e._v(e._s(e._f("currency")(e.totals.paid)))])])],1),e._l(e.sortedPayments,(function(t){return r("v-row",{directives:[{name:"touch",rawName:"v-touch",value:{left:function(){return e.toggleDelete(t,!0)},right:function(){return e.toggleDelete(t,!1)}},expression:"{\n            left: () => toggleDelete(pay, true),\n            right: () => toggleDelete(pay, false),\n          }"}],key:t.id,staticClass:"row-pay secondary",on:{click:function(r){return e.toggleEdit(t,!0)}}},[r("v-col",{staticClass:"text-left pb-0 pt-2",attrs:{cols:"12",md:"6"}},[t.editing?r("div",[r("v-text-field",{attrs:{label:"Name"},model:{value:t.editing.name,callback:function(r){e.$set(t.editing,"name",r)},expression:"pay.editing.name"}})],1):r("div",[e._v(e._s(t.name))])]),r("v-col",{staticClass:"text-right py-0 py-md-2",attrs:{cols:"4",md:"2"}},[t.editing?r("div",[r("v-text-field",{attrs:{label:"Date"},model:{value:t.editing.when,callback:function(r){e.$set(t.editing,"when",r)},expression:"pay.editing.when"}})],1):r("div",[e._v(e._s(t.when))])]),r("v-col",{staticClass:"text-right py-0 py-md-2",attrs:{cols:"4",md:"2"}},[t.editing?r("div",[r("v-text-field",{attrs:{label:"Owed",type:"number"},model:{value:t.editing.owed,callback:function(r){e.$set(t.editing,"owed",r)},expression:"pay.editing.owed"}})],1):r("div",[e._v(e._s(e._f("currency")(t.owed)))])]),r("v-col",{staticClass:"text-right py-0 py-md-2",attrs:{cols:"4",md:"2"}},[t.editing?r("div",[r("v-text-field",{attrs:{label:"Paid",type:"number","append-outer-icon":"fa-times","append-icon":e.isPayValid(t.editing)?"fa-check":""},on:{"click:append":function(r){return e.savePay(t.editing)},"click:append-outer":function(r){return e.toggleEdit(t,!1)}},model:{value:t.editing.amount,callback:function(r){e.$set(t.editing,"amount",r)},expression:"pay.editing.amount"}})],1):r("div",[e._v(e._s(e._f("currency")(t.amount)))])]),r("div",{staticClass:"payrow-hover-buttons",class:{"d-block":t.isTrashVisible}},[r("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!pay.editing"}],staticClass:"mt-1",attrs:{small:"",color:t.changed?"warning":"info"},on:{click:function(r){r.stopPropagation(),t.changed?e.undoCopy(t):e.copyPaidToOwed(t)}}},[t.changed?r("v-icon",[e._v("fas fa-times")]):r("v-icon",[e._v("far fa-arrow-alt-circle-left")])],1),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editing&&t.owed!==t.amount&&!t.changed,expression:"!pay.editing && pay.owed !== pay.amount && !pay.changed"}],staticClass:"mt-1",attrs:{small:"",color:"info"},on:{click:function(r){r.stopPropagation(),t.changed?e.savePay(t):e.copyOwedToPaid(t)}}},[t.changed?r("v-icon",[e._v("fas fa-check")]):r("v-icon",[e._v("far fa-arrow-alt-circle-right")])],1),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editing&&t.owed!==t.amount&&!t.changed,expression:"!pay.editing && pay.owed !== pay.amount && !pay.changed"}],staticClass:"mt-1",attrs:{small:"",color:"error"},on:{click:function(r){return r.stopPropagation(),e.deletePayment(t)}}},[r("v-icon",[e._v("fa fa-trash-alt")])],1)],1)],1)}))],2)],1)],1):e._e()],1)},s=[],u=(r("c740"),r("a15b"),r("a434"),r("a9e3"),r("9129"),r("498a"),r("5530")),l=(r("99af"),r("c35a"),"".concat(window.location.protocol,"//").concat(window.location.hostname).concat("","/main.php"),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2})),p=function(e){return Number.isNaN(Number.parseFloat(e))?e:l.format(e)},d=(r("baa5"),r("d3b7"),r("d4ec")),f=r("bee2"),m=function(){function e(){Object(d["a"])(this,e);var t=document.location.href.substr(0,document.location.href.lastIndexOf("/"));this.baseUrl="".concat(t)}return Object(f["a"])(e,[{key:"__deleteData",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(this.baseUrl).concat(t),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"__fetchData",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseUrl).concat(t));case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"__postData",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},n=new Request("".concat(this.baseUrl).concat(t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}),e.abrupt("return",fetch(n));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"__putData",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},n=new Request("".concat(this.baseUrl).concat(t),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}),e.abrupt("return",fetch(n));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteProject",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.__deleteData("/groups/".concat(t));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteGroup",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.__deleteData("/groups/".concat(t));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deletePay",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.__deleteData("/payments/".concat(t));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addProject",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.__postData("/projects",{name:t});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addGroup",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.__postData("/groups",{project:t,name:r});case 2:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"addPayment",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.__postData("/payments",t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getProjects",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.__fetchData("/projects"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getGroups",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.__fetchData("/projects/".concat(t,"/groups")));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getPayments",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.__fetchData("/groups/".concat(t,"/payments")));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateProject",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.__putData("/projects/".concat(t),r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"updateGroup",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.__putData("/groups/".concat(t),r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"updatePayment",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.__putData("/payments/".concat(t),r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}(),v=new m,h={name:"PayGroup",filters:{currency:p},props:{active:Boolean,group:null},data:function(){return{editingName:!1,groupName:"",payments:[],paymentSearch:"",service:v}},watch:{active:{immediate:!0,handler:function(){this.getPayments(),this.groupName=this.group.name}}},computed:{filteredPayments:function(){if(this.paymentSearch){var e=this.paymentSearch.toLowerCase();return this.payments.filter((function(t){return!!t.editing||0===t.name.toLowerCase().indexOf(e)||t.name.toLowerCase().indexOf(" ".concat(e))>=0}))}return this.payments},sortedPayments:function(){return this.filteredPayments.slice().sort((function(e,t){return e.when.trim()<t.when.trim()&&e.id?1:-1}))},totals:function(){var e={owed:0,paid:0,balance:0};return this.filteredPayments.forEach((function(t){e.owed+=Number.isNaN(+t.owed)?0:+t.owed,e.paid+=Number.isNaN(+t.amount)?0:+t.amount})),0!==+this.group.owed&&(e.balance=+this.group.owed-+this.group.total),e}},methods:{undoCopy:function(e){void 0!==e.originalOwed&&(e.owed=e.originalOwed),void 0!==e.originalAmount&&(e.amount=e.originalAmount),this.$set(e,"changed",!1)},copyPaidToOwed:function(e){e.originalOwed=e.owed,e.owed=e.amount,this.$set(e,"changed",!0)},copyOwedToPaid:function(e){e.originalAmount=e.amount,e.amount=e.owed,this.$set(e,"changed",!0)},deletePayment:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("Are you sure you want to delete this payment?",{title:"Warning"});case 2:if(n=r.sent,!n){r.next=9;break}if(!e.id){r.next=7;break}return r.next=7,t.service.deletePay(e.id);case 7:t.payments.splice(t.payments.findIndex((function(t){return t===e})),1),t.$emit("updated");case 9:case"end":return r.stop()}}),r)})))()},deleteGroup:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$confirm("Are you sure you want to delete this group and all its entries?",{title:"Warning"});case 2:if(r=t.sent,!r||!e.group.id){t.next=7;break}return t.next=6,e.service.deleteGroup(e.group.id);case 6:e.$emit("updated");case 7:case"end":return t.stop()}}),t)})))()},getPayments:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.active){t.next=4;break}return t.next=3,e.service.getPayments(e.group.id);case 3:e.payments=t.sent;case 4:case"end":return t.stop()}}),t)})))()},isPayValid:function(e){return e.name.length>0&&e.when.length>0&&!Number.isNaN(parseFloat(e.amount))&&!Number.isNaN(parseFloat(e.owed))},newPayment:function(){var e=new Date,t=[e.getFullYear(),"0".concat(e.getMonth()+1).slice(-2),"0".concat(e.getDate()).slice(-2)].join("-");this.payments.push({editing:{name:"",when:t,paygroup:this.group.id,amount:0,owed:0},when:""})},savePay:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.isPayValid(e)){r.next=2;break}return r.abrupt("return");case 2:if(!e.id){r.next=7;break}return r.next=5,t.service.updatePayment(e.id,e);case 5:r.next=9;break;case 7:return r.next=9,t.service.addPayment(e);case 9:return r.next=11,t.getPayments();case 11:t.$emit("updated");case 12:case"end":return r.stop()}}),r)})))()},toggleEdit:function(e,t){var r=this;!!e.editing!==!!t&&(t?this.payments.forEach((function(t){t===e?r.$set(e,"editing",JSON.parse(JSON.stringify(e))):t.editing&&r.$set(t,"editing",null)})):e.id?this.$set(e,"editing",null):this.deletePayment(e))},toggleDelete:function(e,t){this.$set(e,"isTrashVisible",t)},updateGroupName:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.service.updateGroup(e.group.id,Object(u["a"])(Object(u["a"])({},e.group),{},{name:e.groupName}));case 2:e.editingName=!1,e.group.name=e.groupName;case 4:case"end":return t.stop()}}),t)})))()}}},g=h,w=(r("1951"),r("2877")),y=r("6544"),b=r.n(y),x=r("8336"),_=r("b0af"),k=r("62ad"),j=r("a523"),O=r("132d"),P=r("0fd9"),C=r("8654"),N=r("269a"),R=r.n(N),V=r("c3f0"),D=Object(w["a"])(g,i,s,!1,null,null,null),G=D.exports;b()(D,{VBtn:x["a"],VCard:_["a"],VCol:k["a"],VContainer:j["a"],VIcon:O["a"],VRow:P["a"],VTextField:C["a"]}),R()(D,{Touch:V["b"]});var S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-btn",{attrs:{icon:"",title:"Dark mode",color:e.$vuetify.theme.dark?"orange":""},nativeOn:{click:function(t){return e.toggleDarkMode(t)}}},[r("v-icon",[e._v("fa fa-moon")])],1)},$=[],T={methods:{toggleDarkMode:function(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark,localStorage.setItem("darkMode",JSON.stringify(this.$vuetify.theme.dark))}},mounted:function(){this.$vuetify.theme.dark=JSON.parse(localStorage.getItem("darkMode")||"false")}},A=T,E=Object(w["a"])(A,S,$,!1,null,null,null),F=E.exports;b()(E,{VBtn:x["a"],VIcon:O["a"]});var M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("v-btn",{staticClass:"ml-5 mr-2",attrs:{small:"",color:"success"},on:{click:function(t){e.isNewProject=!0}}},[e._v(" Add Project "),r("v-icon",{attrs:{small:"",right:""}},[e._v("fa fa-plus")])],1),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.isNewProject,callback:function(t){e.isNewProject=t},expression:"isNewProject"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Create new project")]),r("v-card-text",[r("v-text-field",{attrs:{label:"Project Name"},model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}})],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"warning",text:""},on:{click:function(t){return e.closeDialog(!1)}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{color:"success",text:"",disabled:!e.projectName.trim()},on:{click:function(t){return e.closeDialog(!0)}}},[e._v(" Create ")])],1)],1)],1)],1)},B=[],I={data:function(){return{isNewProject:!1,projectName:"",service:v}},methods:{closeDialog:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e){r.next=4;break}return r.next=3,t.service.addProject(t.projectName);case 3:t.$emit("created");case 4:t.projectName="",t.isNewProject=!1;case 6:case"end":return r.stop()}}),r)})))()}}},L=I,J=r("99d9"),U=r("169a"),q=r("2fa4"),W=Object(w["a"])(L,M,B,!1,null,null,null),H=W.exports;b()(W,{VBtn:x["a"],VCard:_["a"],VCardActions:J["b"],VCardText:J["d"],VCardTitle:J["e"],VDialog:U["a"],VIcon:O["a"],VSpacer:q["a"],VTextField:C["a"]});var Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("v-btn",{staticClass:"ml-5 mr-2",attrs:{small:"",color:"success"},on:{click:function(t){e.isOpen=!0}}},[r("v-icon",[e._v("fa fa-plus")])],1),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Add new paygroup")]),r("v-card-text",[r("v-text-field",{attrs:{label:"Group Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"warning",text:""},on:{click:function(t){return e.closeDialog(!1)}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{color:"success",text:"",disabled:!e.name.trim()},on:{click:function(t){return e.closeDialog(!0)}}},[e._v(" Create ")])],1)],1)],1)],1)},z=[],K={props:{project:null},data:function(){return{isOpen:!1,name:"",service:v}},methods:{closeDialog:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e||!t.project){r.next=4;break}return r.next=3,t.service.addGroup(t.project,t.name);case 3:t.$emit("created");case 4:t.name="",t.isOpen=!1;case 6:case"end":return r.stop()}}),r)})))()}}},Q=K,X=Object(w["a"])(Q,Y,z,!1,null,null,null),Z=X.exports;b()(X,{VBtn:x["a"],VCard:_["a"],VCardActions:J["b"],VCardText:J["d"],VCardTitle:J["e"],VDialog:U["a"],VIcon:O["a"],VSpacer:q["a"],VTextField:C["a"]});var ee={name:"App",components:{PayGroup:G,DarkToggle:F,NewProject:H,NewPaygroup:Z},filters:{currency:p},data:function(){return{activeGroup:-1,project:null,projects:[],groups:[],groupSearch:"",service:v}},watch:{project:function(){this.activeGroup=-1,this.project&&(this.getGroups(),+this.$route.params.id!==+this.project&&this.$router.push({params:{id:this.project}}))},groupSearch:function(){console.log("searching group"),this.activeGroup=-1},"$route.params.id":{immediate:!0,handler:function(){this.project=+this.$route.params.id}}},computed:{filteredGroups:function(){if(this.groupSearch){var e=this.groupSearch.toLowerCase();return this.groups.filter((function(t){return 0===t.name.toLowerCase().indexOf(e)||t.name.toLowerCase().indexOf(" ".concat(e))>=0}))}return this.groups},sortedGroups:function(){return this.filteredGroups.slice().sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1}))},totals:function(){var e={owed:0,paid:0,balance:0};return this.groups.forEach((function(t){e.owed+=+t.owed,e.paid+=+t.total,0!==+t.owed&&(e.balance+=+t.owed-+t.total)})),e}},methods:{getGroups:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.project){t.next=3;break}return e.groups=[],t.abrupt("return");case 3:return t.next=5,e.service.getGroups(e.project);case 5:e.groups=t.sent;case 6:case"end":return t.stop()}}),t)})))()},getProjects:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.service.getProjects();case 2:e.projects=t.sent;case 3:case"end":return t.stop()}}),t)})))()},setActiveGroup:function(e){console.log("set active group"),this.activeGroup===e?this.activeGroup=-1:this.activeGroup=e}},mounted:function(){this.getProjects()}},te=ee,re=(r("db11"),r("0798")),ne=r("7496"),ae=r("40dc"),oe=r("c6a6"),ce=r("f6c4"),ie=Object(w["a"])(te,a,o,!1,null,"455a49ec",null),se=ie.exports;b()(ie,{VAlert:re["a"],VApp:ne["a"],VAppBar:ae["a"],VAutocomplete:oe["a"],VCard:_["a"],VCol:k["a"],VContainer:j["a"],VMain:ce["a"],VRow:P["a"],VSpacer:q["a"],VTextField:C["a"]});var ue=r("8c4f");n["a"].use(ue["a"]);var le=[{path:"/:id?",name:"Home"}],pe=new ue["a"]({mode:"history",base:"/",routes:le}),de=pe,fe=r("f309"),me=r("fcf4"),ve=r("9eed"),he=r.n(ve);n["a"].use(fe["a"]);var ge=new fe["a"]({icons:{iconfont:"fa"},theme:{themes:{light:{accent:me["a"].lightBlue.lighten5,secondary:me["a"].blueGrey.lighten5},dark:{accent:me["a"].grey.darken4,secondary:me["a"].blueGrey.darken4}}}});n["a"].use(he.a,{vuetify:ge});var we=ge;r("d5e8"),r("15f5");n["a"].config.productionTip=!1,new n["a"]({router:de,vuetify:we,render:function(e){return e(se)}}).$mount("#app")},7017:function(e,t,r){},bc1c:function(e,t,r){},db11:function(e,t,r){"use strict";var n=r("bc1c"),a=r.n(n);a.a}});
//# sourceMappingURL=app.214f45ad.js.map